<form
  [formGroup]="rForm"
  (ngSubmit)="onSubmit()"
  class="space-y-5 max-h-[70vh] overflow-y-auto pr-2"
>
  <!-- title -->
  <div>
    <label for="title" class="block text-sm font-semibold text-gray-700 mb-2">
      Title <span class="text-red-600">*</span>
    </label>
    <input
      id="title"
      formControlName="title"
      type="text"
      placeholder="Enter main heading"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
    />
    <input-validation-error-message
      [control]="rForm.get('title')"
      fieldName="Title"
    />
  </div>
  <!-- subtitle -->
  <div>
    <label
      for="subtitle"
      class="block text-sm font-semibold text-gray-700 mb-2"
    >
      Subtitle
    </label>
    <input
      id="subtitle"
      formControlName="subtitle"
      type="text"
      placeholder="Enter subtitle"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
    />
    <input-validation-error-message
      [control]="rForm.get('subtitle')"
      fieldName="Subtitle"
    />
  </div>
  <!-- description -->
  <div>
    <label
      for="description"
      class="block text-sm font-semibold text-gray-700 mb-2"
    >
      Description
    </label>

    <textarea
      id="description"
      formControlName="description"
      rows="4"
      placeholder="Enter detailed description"
      class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all resize-none"
    ></textarea>

    <input-validation-error-message
      [control]="rForm.get('description')"
      fieldName="Description"
    />
  </div>
  <!-- CTA Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- button1_text -->
    <div>
      <label
        for="button1_text"
        class="block text-sm font-semibold text-gray-700 mb-2"
      >
        Button 1 Text
      </label>
      <input
        id="button1_text"
        formControlName="button1_text"
        type="text"
        placeholder="e.g., Get Started"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
      />
      <input-validation-error-message
        [control]="rForm.get('button1_text')"
        fieldName="Button 1 Text"
      />
    </div>
    <!-- button1_url -->
    <div>
      <label
        for="button1_url"
        class="block text-sm font-semibold text-gray-700 mb-2"
      >
        Button 1 URL
      </label>
      <input
        id="button1_url"
        formControlName="button1_url"
        type="url"
        placeholder="e.g., /contact"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
      />
      <input-validation-error-message
        [control]="rForm.get('button1_url')"
        fieldName="Button 1 URL"
      />
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <!-- button2_text -->
    <div>
      <label
        for="button2_text"
        class="block text-sm font-semibold text-gray-700 mb-2"
      >
        Button 2 Text
      </label>
      <input
        id="button2_text"
        formControlName="button2_text"
        type="text"
        placeholder="e.g., Learn More"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
      />
      <input-validation-error-message
        [control]="rForm.get('button2_text')"
        fieldName="Button 2 Text"
      />
    </div>
    <!-- button2_url -->
    <div>
      <label
        for="button2_url"
        class="block text-sm font-semibold text-gray-700 mb-2"
      >
        Button 2 URL
      </label>
      <input
        id="button2_url"
        formControlName="button2_url"
        type="url"
        placeholder="e.g., /about"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
      />
      <input-validation-error-message
        [control]="rForm.get('button2_url')"
        fieldName="Button 2 URL"
      />
    </div>
  </div>
  <!-- image -->
  <div>
    <label class="block text-sm font-semibold text-gray-700 mb-2">
      Hero Image
    </label>

    <!-- Image Preview with Remove Button -->
    @if (selectedImage()) {
    <div class="mb-3 relative inline-block">
      <img
        [src]="apiUrl + selectedImage()"
        alt="Hero image preview"
        class="w-full max-w-md h-48 rounded-lg object-cover border-2 border-gray-200 shadow"
      />
      <button
        type="button"
        (click)="removeImage()"
        class="absolute top-2 cursor-pointer right-2 bg-red-600 text-white p-2 rounded-lg hover:bg-red-700 transition-colors shadow-lg"
      >
        <lucide-icon [img]="X" class="w-3 h-3"></lucide-icon>
      </button>
    </div>
    }

    <!-- Image Picker Button -->
    <app-image-cropper-modal
      [buttonLabel]="selectedImage() ? 'Change Image' : 'Select Image'"
      [directory]="'hero-sections'"
      [multiple]="false"
      (onSelect)="onImageSelect($event)"
    ></app-image-cropper-modal>

    <input-validation-error-message
      [control]="rForm.get('image')"
      fieldName="Image"
    />
  </div>

  <!-- Rating and Customers Count -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div>
      <label
        for="rating"
        class="block text-sm font-semibold text-gray-700 mb-2"
      >
        Rating (1-5)
      </label>
      <input
        id="rating"
        formControlName="rating"
        type="number"
        min="1"
        max="5"
        step="0.1"
        placeholder="e.g., 4.5"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
      />
      <input-validation-error-message
        [control]="rForm.get('rating')"
        fieldName="Rating"
      />
    </div>

    <div>
      <label
        for="customers_count"
        class="block text-sm font-semibold text-gray-700 mb-2"
      >
        Customers Count
      </label>
      <input
        id="customers_count"
        formControlName="customers_count"
        type="text"
        placeholder="e.g., 10000+"
        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all"
      />
      <input-validation-error-message
        [control]="rForm.get('customers_count')"
        fieldName="Customers Count"
      />
    </div>
  </div>

  <div
    class="flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer select-none"
    (click)="toggleStatus()"
  >
    <label class="text-sm cursor-pointer font-medium text-gray-700">
      Active Status
    </label>
    <app-toggle-switch formControlName="status"></app-toggle-switch>
  </div>

  <div class="flex gap-3 pt-2">
    <button
      type="button"
      (click)="rForm.reset()"
      class="flex-1 py-3 px-4 cursor-pointer bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-colors"
    >
      Reset
    </button>
    <button
      type="button"
      (click)="closeModal(false)"
      class="flex-1 py-3 px-4 cursor-pointer bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-colors"
    >
      Cancel
    </button>
    <button
      type="submit"
      class="flex-1 py-3 px-4 cursor-pointer bg-linear-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-lg hover:from-blue-700 hover:to-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all shadow-md hover:shadow-lg"
    >
      {{ data() ? 'Update' : 'Create' }}
    </button>
  </div>
</form>
